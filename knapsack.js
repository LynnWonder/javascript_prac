// èƒŒåŒ…é—®é¢˜æ€»ç»“ï¼ŒåŒ…å«0-1èƒŒåŒ…é—®é¢˜å’Œéƒ¨åˆ†èƒŒåŒ…é—®é¢˜

//0-1èƒŒåŒ…é—®é¢˜
/**
 * é—®é¢˜æè¿°ï¼šèƒŒåŒ…é‡é‡æœ€å¤§æ˜¯16ï¼Œç°æœ‰nä¸ªç‰©å“ é‡é‡åˆ†åˆ«ä¸º10ï¼Œ8ï¼Œ5ï¼Œä»·å€¼åˆ†åˆ«ä¸º5ï¼Œ4ï¼Œ1
 * æ±‚æ­¤èƒŒåŒ…åœ¨ä¸è¶…é‡çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šèƒ½è£…å¤šå°‘ä»·å€¼çš„ç‰©å“
 */
/**
 * é—®é¢˜çš„æœ¬èº«å…¶å®ä¹Ÿå¯ä»¥ç”¨å›æº¯æ³•æ¥åšï¼Œå› ä¸ºæœ¬èº«æ»¡è¶³å›æº¯é—®é¢˜çš„ä¸‰ä¸ªæ¡ä»¶
 * 1ã€‚é—®é¢˜çš„è§£ç”¨å‘é‡è¡¨ç¤º
 * 2ã€‚é—®é¢˜çš„è§£æ˜¯ä¸€ç»„è§£æˆ–è€…ä¸€ç»„è§£ä¸­æ‰¾ä¸€ä¸ª
 * 3ã€‚æ»¡è¶³çº¦æŸæ¡ä»¶çš„æœ€ä¼˜è§£
 * @param w
 * @param v
 * @param capacity
 * @returns {number}
 */
const knapsack0=(w,v,capacity)=>{
    let curW=0,curVal=0,maxVal=0,compose=new Array(w.length).fill(0);
    const recur=k=>{
        if(k>=w.length&&curW<=capacity){
            console.info('===>',compose,curVal);
            if(maxVal<curVal){
                maxVal=curVal;
            }
        }else{
            // åˆ†ä¸ºæ”¾å…¥èƒŒåŒ…å’Œä¸æ”¾å…¥èƒŒåŒ…ä¸¤ç§æƒ…å†µ
            for(let i=0;i<=1;i++){
                if(i===0){
                    recur(k+1);
                }else{
                    if(curW+w[k]<=capacity){
                        curW+=w[k];
                        curVal+=v[k];
                        compose[k]=w[k];
                        recur(k+1);
                        curW-=w[k];
                        curVal-=v[k];
                        compose[k]=0;
                    }
                }
            }
        }
    };
    recur(0);
    return maxVal;
};
/**
 * @param w ç‰©å“çš„é‡é‡æ•°ç»„
 * @param v ç‰©å“çš„ä»·å€¼æ•°ç»„
 * @param idx å½“å‰å¾…é€‰æ‹©çš„ç‰©å“ç´¢å¼•
 * @param capacity å½“å‰èƒŒåŒ…æœ‰æ•ˆå®¹é‡
 * @returns {number}
 */
// ä¸ºä»€ä¹ˆè¦å†™çŠ¶æ€è½¬ç§»æ–¹ç¨‹å‘¢ï¼Œå­˜åœ¨çŠ¶æ€å—ï¼Œé¦–å…ˆå¦‚æœæœ€ä¼˜ç­”æ¡ˆä¸­æ²¡æœ‰ç‰©å“x,é‚£ä¹ˆæ­¤æ—¶çš„ç»„åˆå¯èƒ½å°±æ˜¯c-w[x]çš„æœ€å¤§ä»·å€¼é‡
// å› æ­¤æˆ‘ä»¬å‘ç°å½“å‰çŠ¶æ€å¯èƒ½ä¼šè·Ÿå‰ä¸€ä¸ªçŠ¶æ€å‘ç”Ÿå…³è”ï¼Œ
// é¦–å…ˆç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šF(i,n)=max(F(i-1,n),v(i)+F(i-1,n-w[i]))
const knapsack=(w,v,idx,capacity)=>{
    if(idx<0||capacity<=0) return 0;
    // ä¸æ”¾ç¬¬idxä¸ªç‰©å“çš„æ€»ä»·å€¼
    let res=knapsack(w,v,idx-1,capacity);
    if(w[idx]<=capacity){
        res=Math.max(res,v[idx]+knapsack(w,v,idx-1,capacity-w[idx]));
    }
    return res;
};
/**
 * 0-1èƒŒåŒ…é—®é¢˜ä¼˜åŒ–ä¹‹å­˜å‚¨å·²ç»è·å–çš„ç»“æœ
 * @param w
 * @param v
 * @param C
 * @returns {number}
 */
const knapsack1=(w,v,C)=>{
    let memo=new Array(w.length);
    for(let i=0;i<memo.length;i++){
        memo[i]=new Array(C+1);
    }
    const solveKS=(w,v,idx,C)=>{
        if(idx<0||C<=0)return 0;
        if(memo[idx][C]) return memo[idx][C];
        let res=solveKS(w,v,idx-1,C);
        if(w[idx]<C){
            res=Math.max(res,v[idx]+solveKS(w,v,idx-1,C-w[idx]));
        }
        memo[idx][C]=res;
        return res;
    };
    return solveKS(w,v,w.length-1,C);
};
/**
 * è§£å†³0-1èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’ç®—æ³•
 * @param w
 * @param v
 * @param C
 */
const knapsack2=(w,v,C)=>{
    let size=w.length;
    if(size===0) return 0;
    //  æ­¤çŸ©é˜µçš„æ„æ€å°±æ˜¯dp[i][j]è¡¨ç¤ºå‰i+1ä¸ªç‰©å“æ”¾å…¥åˆ°å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­çš„æœ€å¤§ä»·å€¼
    let dp=new Array(size);
    for(let i=0;i<size;i++){
        dp[i]=new Array(C+1);
    }
    // ä¸ºä½•è¦åˆå§‹åŒ–ç¬¬ä¸€è¡Œï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªç‰©å“æ”¾å…¥åˆ°å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­çš„æ—¶å€™çš„ä»·å€¼é‡
    // æ˜¯è¾¹ç•Œå€¼
    //åˆå§‹åŒ–ç¬¬ä¸€è¡Œï¼Œä»…è€ƒè™‘å®¹é‡ä¸ºCçš„èƒŒåŒ…æ”¾ç¬¬0ä¸ªç‰©å“çš„æƒ…å†µ
    for(let i=0;i<C+1;i++){
        dp[0][i]=w[0]<=i?v[0]:0;
    }
    // å¡«å……å…¶å®ƒè¡Œ
    for(let i=1;i<size;i++){
        for(let j=0;j<C+1;j++){
            // é¦–å…ˆè®¾å®šå€¼å°±æ˜¯å‰iä¸ªç‰©å“æ”¾å…¥æ—¶çš„ä»·å€¼é‡
            dp[i][j]=dp[i-1][j];
            if(w[i]<=j){
                // key:è¿™ä¸€æ­¥ä¿è¯äº†ä¸ä¼šè®©æ€»é‡é‡è¶…è¿‡èƒŒåŒ…çš„å®¹é‡ï¼Œä¸”æ­¤æ—¶èƒŒåŒ…çš„å®¹é‡æ˜¯j
                dp[i][j]=Math.max(dp[i][j],v[i]+dp[i-1][j-w[i]]);
            }
        }
    }
    console.info(dp);
    return dp[size-1][C];
};

/**
 * è§£å†³ 0-1 èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œè¿™ç§æ–¹æ³•æ›´å®¹æ˜“ç†è§£
 * ä¸€èˆ¬æ¥è®²æˆ‘ä»¬éƒ½æ˜¯å…ˆä»å®¹é‡å…¥æ‰‹æ¥å†™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ F(c, arr)=max(F(c-wi, arr[:i])+pi, F(c, arr[:i]))  arr[:i] è¡¨ç¤ºè·å–åˆ°
 * arr ä» 0 åˆ° i(ä¸åŒ…å« i)
 * å¤‡æ³¨ï¼šå¯èƒ½ä¼šç–‘é—®ä¸ºä»€ä¹ˆä¸æŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰é‡é‡å…ƒç´ éƒ½æŒ‰è¿™ä¸ªè§„åˆ™éå†ä¸€æ¬¡ï¼Œä¸ºä»€ä¹ˆåªå–æœ€åä¸€ä¸ªå…ƒç´ æ¥åšæ¯”è¾ƒå‘¢ï¼Œå®é™…ä¸Šåªå–æœ€åä¸€ä¸ªå…ƒç´ å°±èƒ½æ¶µç›–å…¶ä»–æ‰€æœ‰
 * æƒ…å†µï¼Œå› æ­¤è¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯æ²¡é—®é¢˜çš„
 * è¾¹ç•Œæ¡ä»¶ï¼šF(0,arr) = F(c, []) =0 åŒæ—¶æ•°ç»„é•¿åº¦ä¸º 1 çš„æƒ…å†µä¹Ÿæ»¡è¶³çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œæ‰€ä»¥æ— éœ€ç‰¹åˆ«åšè¾¹ç•Œæ¡ä»¶
 * æš‚å­˜ç»“æœæ–¹æ¡ˆï¼šå¯ä»¥ç›´æ¥ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¥åš dp[i][j] i æ ‡è¯†å®¹é‡ä» 0 åˆ° cï¼Œé•¿åº¦ä¸º c+1ï¼Œj æ ‡è¯†æ•°ç»„çš„é•¿åº¦ä» 0 åˆ° nï¼Œé•¿åº¦ä¸º n+1
 * @param w
 * @param v
 * @param C
 */
const knapsack3=(w,v,C)=>{
    let n = w.length, res= new Array(C+1)
    for (let i=0;i<C+1;i++){
        res[i] = new Array(n+1);
    }
    // å®¹é‡ä¸º 0 çš„æ—¶å€™æ‰€æœ‰å€¼å‡ä¸º 0
    for (let i=0;i<n+1;i++){
        res[0][i] = 0
    }
    for (let i=1;i<C+1;i++){
        res[i][0] = 0;
        for(let j=1;j<n+1;j++){
            res[i][j] = res[i][j-1];
            if (i>=w[j-1]){
                res[i][j] = Math.max(res[i][j], res[i-w[j-1]][j-1]+v[j-1]);
            }
        }
    }
    console.info('=====>',res);
    return res[C][n]
}
// console.info(knapsack0([10,8,5],[5,4,1],16));
// console.info(knapsack2([10,8,5],[5,4,1],16));
// console.info(knapsack([10,8,5],[5,4,1],2,16));
// console.info(knapsack1([10,8,5],[5,4,1],16));
// console.info(knapsack3([1, 2, 3], [4, 5, 2], 2));
console.info(knapsack2([1, 2, 3], [4, 5, 2], 2));
console.info(knapsack2([1, 2, 3], [4, 5, 2], 3));
console.info(knapsack2([1, 2, 3], [4, 5, 2], 5));


// ä»¥ [10,8,5],[5,4,1],16 ä¸ºğŸŒ°è¿›è¡Œæµ‹è¯•ï¼š
// é’ˆå¯¹ dp[i][j] i æŒ‡çš„æ˜¯æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å³æ•°ç»„é•¿åº¦ä¸º i+1, j æŒ‡çš„æ˜¯å®¹é‡å¤§å°
// [
//   [  æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™å®¹é‡ä» 0 åˆ° 16 çš„å˜åŒ–
//     0, 0, 0, 0, 0, 0, 0,
//     0, 0, 0, 5, 5, 5, 5,
//     5, 5, 5
//   ],
//   [ æ•°ç»„æœ‰ä¸¤ä¸ªå…ƒç´ çš„æ—¶å€™å®¹é‡ä» 0 åˆ° 16 çš„å˜åŒ–
//     0, 0, 0, 0, 0, 0, 0,
//     0, 4, 4, 5, 5, 5, 5,
//     5, 5, 5
//   ],
//   [ æ•°ç»„æœ‰ä¸‰ä¸ªå…ƒç´ çš„æ—¶å€™å®¹é‡ä» 0 åˆ° 16 çš„å˜åŒ–
//     0, 0, 0, 0, 0, 1, 1,
//     1, 4, 4, 5, 5, 5, 5,
//     5, 6, 6
//   ]
// ]


// é’ˆå¯¹ dp[i][j] i æŒ‡çš„æ˜¯å®¹é‡å¤§å°ï¼Œj æŒ‡çš„æ˜¯å½“å‰æ•°ç»„é•¿åº¦æ—¶
// [[0, 0, 0, 0],
//  [0, 0, 0, 0],
//  [0, 0, 0, 0],
//  [0, 0, 0, 0],
//  [0, 0, 0, 0],
//  [0, 0, 0, 1],
//  [0, 0, 0, 1],
//  [0, 0, 0, 1],
//  [0, 0, 4, 4],
//  [0, 0, 4, 4],
//  [0, 5, 5, 5],
//  [0, 5, 5, 5],
//  [0, 5, 5, 5],
//  [0, 5, 5, 5],
//  [0, 5, 5, 5],
//  [0, 5, 5, 6],
//  [0, 5, 5, 6]]