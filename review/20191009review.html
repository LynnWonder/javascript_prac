<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>20191009review</title>
</head>
<body>
<script>
    /**
     * 今日任务
     * 链表中检测环的存在
     */
    function Node(ele){
        this.val=ele;
        this.next=null;
    }
    class Linklist{
        constructor(arr){
            if (arr.length<1) this.head=null;
            this.head=new Node(arr[0]);
            let temp=this.head;
            for (let i=1;i<arr.length;i++){
                temp.next=new Node(arr[i]);
                temp=temp.next;
            }

        }
        push(ele){
            this.head.next=new Node(ele);
        }
        find(ele){
            let list=this.head;
            while(list){
                if (list.val===ele){
                    return list;
                }
                list=list.next;
            }
        }
        insert(ele1,ele2){
            let node1=new Node(ele1);
            // 寻找到内容所在的节点
            let node2=this.find(ele2);
            node1.next=node2.next;
            node2.next=node1;
        }
    }
    let arr0=[1,2,3,4];
    let list=new Linklist(arr0);
    console.info(list.head);
    list.insert(5,4);
    console.info(list.head);
    list.find(4).next=list.find(2);
    console.info(list.head);
    /**
     * 使用快慢指针法寻找是否有环
     * @param list
     */
    const findCircle=list=>{
        if(!list) return false;
        let slow=list.next;
        let fast=list.next.next;
        while(slow&&fast){
            if (slow===fast){
                console.info(slow,fast);
                return true;
            }
            slow=slow.next;
            fast=fast.next.next;
        }
        return false;
    };
    console.info(findCircle(list.head));
    /**
     * 使用hash表模式 set类似于数组 但是元素均不重复
     */
    const findCircle1=list=>{
        let set0=new Set();
        while(list){
            set0.add(list);
            list=list.next;
            if (set0.has(list)){
                console.info(list);
                return true;
            }
        }
        return false;
    };
    let list1=new Linklist([1,2,3,4,5]);
    console.info(findCircle1(list.head)); //true
    console.info(findCircle1(list1.head)); //false
</script>
</body>
</html>