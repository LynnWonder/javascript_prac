<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>merry ChristmasðŸŽ„ðŸŽ„ðŸŽ„</title>
</head>
<body>
<script>
    /**
     * ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„Â nums1 å’ŒÂ nums2ã€‚
     è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºÂ O(log(m + n))ã€‚
     ä½ å¯ä»¥å‡è®¾Â nums1Â å’ŒÂ nums2Â ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚
     é€šè¿‡è§‚å¯Ÿæ—¶é—´å¤æ‚åº¦å¯ä»¥å¾ˆæ˜Žç¡®ä¸€å®šæ˜¯åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•å®Œæˆï¼Œä½†æ˜¯
     * @param A
     * @param B
     */
    /**
     * å…ˆè€ƒè™‘å¦‚æžœä¸åŽ»è®¡è¾ƒæ—¶é—´å¤æ‚åº¦çš„å¤§å°ï¼Œå¦‚ä½•ç¡®å®šä¸­ä½æ•°å‘¢
     * é€šè¿‡ä»¥å…¶ä¸­æœ€é•¿çš„æ•°ç»„ä¸ºåŸºå‡†å‘æ•°ç»„ä¸­æ’å…¥çŸ­æ•°ç»„æ•°æ®çš„æ–¹å¼ç¡®å®šæŽ’åºå¥½çš„æ•°ç»„ï¼Œæœ€ç»ˆç¡®å®šä¸­ä½æ•°
     * æ—¶é—´å¤æ‚åº¦ä¸ºO(m+n)æœ€å·®çš„æƒ…å†µä¸‹ä¸¤ä¸ªæ•°ç»„éƒ½éœ€è¦éåŽ†ä¸€é
     * @param A
     * @param B
     */
    const findMedianSortedArrays=(A,B)=>{
        let sum=A.length+B.length;
        if (A.length===B.length&&sum===2){
            return (A[0]+B[0])/2
        }
        const sortAB=(a,b)=>{
            let j=0;
            for(let i=0;i<b.length;i++){
                for(let k=j;k<a.length-1;k++){
                    if (k===0&&a[k]>=b[i]){
                        a.unshift(b[i]);
                        j=k;
                        break;
                    }else if(a[k]<=b[i]&&a[k+1]>=b[i]){
                        // console.info('k',k);
                        a.splice(k+1,0,b[i]);
                        j=k+1;
                        break;
                    }else{
                        j=k;
                    }
                }
                if(a.length<sum&&j+1===a.length-1&&a[j+1]<=b[i]){
                    a=a.concat(b.slice(i));
                    break;
                }
            }
            return a;
        };
        if(A.length>=B.length){
            A=sortAB(A,B);
        }else{
            A=sortAB(B,A);
        }
        console.info(A);
        let len=A.length;
        return len%2===0?(A[len/2]+A[len/2-1])/2:A[Math.floor(len/2)];
    };
    /**
     * å…¶å®žä¸Šè¿°çš„ä»£ç ä»ç„¶å…·æœ‰å†—ä½™ï¼Œé¦–å…ˆä¸ä¸€å®šä»¥é•¿æ•°ç»„ä¸ºåŸºå‡†è¿›è¡Œæ’å…¥ï¼Œå¯ä»¥ç”¨ä»»æ„ä¸€ä¸ªæ•°ç»„ä½œä¸ºåŸºå‡†
     * å‡å¦‚ä»¥Bä¸ºåŸºå‡†å‘Bä¸­æ’å…¥æ•°æ®
     */
    const findMedianSortedArrays0=(A,B)=>{
        let j=0;
        for(let i=0;i<A.length;i++){
            while(j<B.length){
                if (B[j]>=A[i]){
                    B.splice(j,0,A[i]);
                    j++;
                    break;
                }else if(j===B.length-1&&B[j]<A[i]){
                   B.push(A[i]);
                   j++;
                   break;
                }else{
                    j++;
                }
            }
        }
        if(B.length===0){
            B=A;
        }
        let len=B.length;
        return len%2===0?(B[len/2]+B[len/2-1])/2:B[Math.floor(len/2)];

    };
    /**
     * ä»¥ä¸Šçš„é—®é¢˜è§£æ³•æ˜¾ç„¶ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æœ‰å¿…è¦é€šè¿‡äºŒåˆ†æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜
     * @param A
     * @param B
     */
    const findMedianSortedArrays1=(A,B)=>{
        // make sure A.length<B.length
        if(A.length>B.length){
            let temp=A;
            A=B;
            B=temp;
        }
        let m=A.length,n=B.length;
        // start binary-search,build start and end
        let st = 0,ed=m;
        while(st<=ed){
            let i=Math.floor((st+ed)/2);
            // to avoid m+n is odd
            let j=Math.floor((m+n+1)/2)-i;
            // case 1' åªæ˜¯é‰´äºŽstå¯ä»¥ç­‰äºŽedçš„ç¼˜æ•…ï¼Œåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦iå°±æ˜¯stï¼Œå¦‚æžœä¸åˆ¤æ–­äº¦å¯
            if(i>st&&A[i-1]>B[j]){
                // binary search directly
                // i is too big
                ed=i-1;
                // case 2'
            }else if(i<ed&&B[j-1]>A[i]){
                // i is too small
                st=i+1;
            }else{
                let maxLeft=0;
                if(i===0){
                    maxLeft=B[j-1];
                }else if(j===0){
                    maxLeft=A[i-1];
                }else{
                    maxLeft=Math.max(A[i-1],B[j-1]);
                }

                let minRight = 0;
                if (i === m){
                    minRight = B[j];
                }else if (j === n) {
                    minRight = A[i];
                }else {
                    minRight = Math.min(B[j], A[i]);
                }
                return (m+n)%2===0?(maxLeft+minRight)/2:maxLeft;
            }
        }

    };
    let arr=[1,2,3];
    // arr.splice(0,0,12);
    // console.info(arr);
    console.info(findMedianSortedArrays(arr,[4,5]));
    console.info(findMedianSortedArrays0(arr,[4,5]));
    console.info(findMedianSortedArrays1(arr,[4,5]));
    console.info(findMedianSortedArrays([1,2],[1,2]));
    console.info(findMedianSortedArrays0([1,2],[1,2]));
    console.info(findMedianSortedArrays1([1,2],[1,2]));
    console.info(findMedianSortedArrays([100000],[100001]));
    console.info(findMedianSortedArrays0([100000],[100001]));
    console.info(findMedianSortedArrays1([100000],[100001]));
    console.info(findMedianSortedArrays([3,4],[1,2]));
    console.info(findMedianSortedArrays0([3,4],[1,2]));
    console.info(findMedianSortedArrays1([3,4],[1,2]));
    console.info(findMedianSortedArrays0([2],[]));
    console.info(findMedianSortedArrays1([2],[]));
</script>
</body>
</html>